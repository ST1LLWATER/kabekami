{"version":3,"sources":["../../src/middlewares/errorHandler.ts","../../src/utils/logger.ts"],"sourcesContent":["import {Request, Response, NextFunction} from 'express';\r\nimport logger from '../utils/logger';\r\n\r\ninterface CustomError extends Error {\r\n  statusCode?: number;\r\n}\r\n\r\nexport const errorHandler = (\r\n  err: CustomError,\r\n  _req: Request,\r\n  res: Response,\r\n  _next: NextFunction\r\n) => {\r\n  const status = err.statusCode || 500;\r\n  const message = err.message || 'Internal Server Error';\r\n\r\n  logger.error(`Status: ${status}, Message: ${message}, Stack: ${err.stack}`);\r\n\r\n  res.status(status).json({\r\n    success: false,\r\n    status,\r\n    message,\r\n    stack: process.env.NODE_ENV === 'production' ? 'ðŸ¥ž' : err.stack,\r\n  });\r\n};\r\n","import winston from 'winston';\r\n\r\nconst logger = winston.createLogger({\r\n  level: 'info',\r\n  format: winston.format.combine(\r\n    winston.format.timestamp(),\r\n    winston.format.printf(({ timestamp, level, message }) => {\r\n      return `${timestamp} ${level}: ${message}`;\r\n    })\r\n  ),\r\n  transports: [\r\n    new winston.transports.Console(),\r\n    new winston.transports.File({ filename: 'error.log', level: 'error' }),\r\n    new winston.transports.File({ filename: 'combined.log' }),\r\n  ],\r\n});\r\n\r\nexport default logger;\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;;;ACAA,qBAAoB;AAEpB,IAAM,SAAS,eAAAA,QAAQ,aAAa;AAAA,EAClC,OAAO;AAAA,EACP,QAAQ,eAAAA,QAAQ,OAAO;AAAA,IACrB,eAAAA,QAAQ,OAAO,UAAU;AAAA,IACzB,eAAAA,QAAQ,OAAO,OAAO,CAAC,EAAE,WAAW,OAAO,QAAQ,MAAM;AACvD,aAAO,GAAG,SAAS,IAAI,KAAK,KAAK,OAAO;AAAA,IAC1C,CAAC;AAAA,EACH;AAAA,EACA,YAAY;AAAA,IACV,IAAI,eAAAA,QAAQ,WAAW,QAAQ;AAAA,IAC/B,IAAI,eAAAA,QAAQ,WAAW,KAAK,EAAE,UAAU,aAAa,OAAO,QAAQ,CAAC;AAAA,IACrE,IAAI,eAAAA,QAAQ,WAAW,KAAK,EAAE,UAAU,eAAe,CAAC;AAAA,EAC1D;AACF,CAAC;AAED,IAAO,iBAAQ;;;ADVR,IAAM,eAAe,CAC1B,KACA,MACA,KACA,UACG;AACH,QAAM,SAAS,IAAI,cAAc;AACjC,QAAM,UAAU,IAAI,WAAW;AAE/B,iBAAO,MAAM,WAAW,MAAM,cAAc,OAAO,YAAY,IAAI,KAAK,EAAE;AAE1E,MAAI,OAAO,MAAM,EAAE,KAAK;AAAA,IACtB,SAAS;AAAA,IACT;AAAA,IACA;AAAA,IACA,OAAO,QAAQ,IAAI,aAAa,eAAe,cAAO,IAAI;AAAA,EAC5D,CAAC;AACH;","names":["winston"]}